\section{NTP client}

% Short description/overview of module functions


\subsection{pico$\_$ntp$\_$sync}

\subsubsection*{Description}
Function to sync the local time to a given ntp server.
\subsubsection*{Function prototype}
\begin{verbatim}
int pico_ntp_sync(char *ntp_server, void (*cb_synced)());
\end{verbatim}

\subsubsection*{Parameters}
\begin{itemize}[noitemsep]
\item \texttt{ntp$\_$server} - String with the ntp server to get the time from
\item \texttt{cb$\_$synced} - Callback function that is called when the synchronisation process is done
\end{itemize}

\subsubsection*{Return value}
On success, this call returns 0 if the synchronisation operation has succeeded.
On error, -1 is returned and \texttt{pico$\_$err} is set appropriately.

\subsubsection*{Errors}
\begin{itemize}[noitemsep]
\item \texttt{PICO$\_$ERR$\_$EINVAL} - invalid argument
\item \texttt{PICO$\_$ERR$\_$ENOMEM} - not enough space
\item \texttt{PICO$\_$ERR$\_$EAGAIN} - resource temporarily unavailable
\end{itemize}

\subsubsection*{Example}
\begin{verbatim}
ret = pico_ntp_sync("ntp:ntp.nasa.gov", &callback);
\end{verbatim}



\subsection{pico$\_$ntp$\_$gettimeofday}

\subsubsection*{Description}
Function to get the current time.

\subsubsection*{Function prototype}
\begin{verbatim}
int pico_ntp_gettimeofday(struct pico_timeval *tv);
\end{verbatim}

\subsubsection*{Parameters}
\begin{itemize}[noitemsep]
\item \texttt{tv} - Pointer to a time$\_$val struct in which the current time is set.
\end{itemize}

\subsubsection*{Return value}
On success, this call returns 0 if the time is set.
On error, -1 is returned and \texttt{pico$\_$err} is set appropriately.

\subsubsection*{Errors}
\begin{itemize}[noitemsep]
\item \texttt{PICO$\_$ERR$\_$EINVAL} - invalid argument
\item \texttt{PICO$\_$ERR$\_$ENOMEM} - not enough space
\item \texttt{PICO$\_$ERR$\_$EAGAIN} - resource temporarily unavailable
\end{itemize}

\subsubsection*{Example}
\begin{verbatim}
int ret = pico_ntp_gettimeofday(tv);
\end{verbatim}



